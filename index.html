<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Programación funcional en Java</title>

		<meta name="description" content="Principios de programación funcional en Java">
		<meta name="author" content="Timoteo Ponce">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="stylesheet" href="reveal.js/css/reveal.css">
		<link rel="stylesheet" href="reveal.js/css/theme/black.css" id="theme">

		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="reveal.js/lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'reveal.js/css/print/pdf.css' : 'reveal.js/css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
					<h1>Programación Funcional</h1>
					<h3>Principios funcionales en Java</h3>
					<p>
						<small>Por <a href="http://timoponce.blogspot.com">Timoteo Ponce</a> </small>
					</p>
				</section>

				<section>
					<h2>Background</h2>
          <p>Swissbytes Ltda.</p>
          <p class="fragment">
          2008</br>
          Suiza, Dinamarca, Australia, Bolivia</br>
          ATM, BRMS, Web Applications
          </p>
				</section>

        <section>
          <h2>Agilidad == Capacidad?</h2>
        </section>

        <section data-background="img/agile_strong.jpg">
        </section>

        <section>
          <p>La agilidad presume capacidad técnica</p>
          <p class="fragment">La capacidad técnica se logra con introspección y mejora continua</p>
          <p class="fragment">La capacidad técnica por si sola, no es suficiente</p>
        </section>

        <section>
          <h1>Un simple problema</h1>
          <p>Programming Pearls Magazine, 1986</p>
          <p class="fragment">
            <i>Leer un archivo de texto, determinar la cantidad de palabras
            mas usadas, e imprimir una lista ordenada de estas palabras
            junto con sus frecuencias.</i>
          </p>
          <p class="fragment">
            - Donald Knuth </br>
            - Doug McIlroy
          </p>
          <p>
            <small>Jon Bentley, Programming Pearls, 1986</small>
          </p>
        </section>

        <section>
          <h2>Resultado: Knuth</h2>
          <ul>
            <li>10+ páginas de código Pascal detalladamente documentado</li>
            <li>Programa procedimental</li>
            <li>Tomó dos dias terminarlo</li>
          </ul>
        </section>

        <section>
          <h2>Resultado: McIlroy</h2>
          <pre>
            <code>
              $> tr -cs A-Za-z '\n' |
                 tr A-Z a-z |
                 sort |
                 uniq -c |
                 sort -rn |
                 sed ${1}q
            </code>
          </pre>
        </section>

        <section>
          <h2>Cuál es la diferencia?</h2>
        </section>

        <section>
          <h2>Qué tienes en tu caja de herramientas?</h2>
          <ul>
            <li>Lenguajes de programación</li>
            <li>Frameworks y librerías</li>
            <li>Plataformas y protocolos</li>
          </ul>
        </section>

        <section>
          <h2>Qué realmente tienes en tu caja de herramientas?</h2>
          <p class="fragment">Programación procedimental</p>
          <p class="fragment">Orientada a objetos</p>
          <p class="fragment">Orientada a aspectos</p>
          <p class="fragment"><b>Funcional</b></p>
          <p class="fragment">Lógica</p>
        </section>

        <section>
          <h2>Simplicidad</h2>
          <blockquote>
            El arte de la programación es el arte de organizar complejidad,
            de controlar el desorden y evitar el caos de la forma mas efectiva
            posible.
          </blockquote>
          <small>Edsger W. Dijkstra</small>
        </section>

        <section>
          <h2>Simple != Fácil</h2>
        </section>

        <section>
          <h2>Por qué nos deberia importar?</h2>
          <p class="fragment">Nosotros escribimos programas que toman decisiones</p>
          <p class="fragment">Las decisiones se basan en valores o datos</p>
          <p class="fragment">Los datos son percibidos o calculados</p>
          <p class="fragment">Los datos calculados son estables</p>
        </section>

        <section>
          <h2>Tenemos límites</h2>
          <ul>
            <li>Podemos construir cosas estables a partir de lo que entendemos</li>
            <li>Podemos considerar cierta cantidad de cosas al mismo tiempo</li>
            <li>Podemos entender cosas nuevas de forma rápida, a menos que sean complejas</li>
            <li>Podemos cambiar software de forma rápida, a menos que sea complejo</li>
            <li>El tipo de complejidad más común, es <b>incidental</b></li>
          </ul>
        </section>


        <section>
          <h1>Funciones</h1>
        </section>

        <section>
          <blockquote>
            La programación funcional es un estilo de programación que enfatiza la evaluación de
            expresiones por encima de la ejecución de comandos
          </blockquote>
          <small>com.lang.functional, 2014</small>
        </section>


        <section>
          <h1>Principios de programación funcional</h1>
        </section>

        <section>
          <h2>Principios</h2>
          <ul>
            <li>Flujo de datos (Data in, Data out)</li>
            <li>Inmutabilidad</li>
            <li>Estilo declarativo</li>
            <li>Datos como datos</li>
            <li>Funciones como datos</li>
          </ul>
        </section>

        <section>
            <section>
              <h2>Flujo de datos</h2>
            </section>

            <section>
              <img src="img/function.png" alt="" style="background: #FFFFCC;" height="500"/>
            </section>

            <section>
              <pre>
                <code>
class Sorter{

    private static List&lt;String&gt; list = new ArrayList&lt;&gt;();

    public List&lt;String&gt; sort(String… args){
        list.clear();
        list.addAll( Arrays.asList(args) );

        Collections.sort(list);
        return list;
    }

}
                </code>
              </pre>
            </section>

            <section>
              <pre>
                <code>
class Sorter{


    public List&lt;String&gt; sort(String… args){
        List&lt;String&gt; list = Arrays.asList(args);
        Collections.sort(list);
        return list;
    }

}
                </code>
              </pre>
            </section>


            <section data-background="#4d7e65" data-background-transition="zoom">
              <p>Alcance local</p>
              <p>Determinístico</p>
              <p>Baja complejidad</p>
              <p>No interrumpe el flujo de ejecución</p>
            </section>
        </section>

        <section>
            <section>
              <h2>Inmutabilidad</h2>
            </section>

            <section>
               <img src="img/anders_hejlsberg.jpg" alt="" height="600"/>
            </section>

            <section>
              <blockquote>
                El problema que tenemos con concurrencia es que por años hemos
                enseñado efectivamente a generaciones de programadores que el
                estado mutable nos permite trabajar de la mejor forma.
                Ahora estamos en una carrera para enseñar que no todo eso es cierto
              </blockquote>
              <small>Anders Hejlsberg, SEI-Radio, 2008</small>
            </section>

            <section>
              <p>Valores &lt; - &gt; Tiempo</p>
              <p class="fragment">
                Git / Mercurial / Fossil
              </p>
            </section>

            <section>
              <h2>Acoplamiento temporal</h2>
              <pre>
                <code data-trim >
Request req = new Request("http://juanbandafanpage.com");
req.method(Request.POST);
request.body("fanId=chichico");
request.fetch();
                </code>

                <code class="fragment" data-trim >
Request req = new Request("http://juanbandafanpage.com");
// req.method(Request.POST);
request.body("fanId=chichico");
request.fetch(); //NPE!!!
                </code>
              </pre>
            </section>

            <section>
              <h2>Acoplamiento temporal</h2>
              <pre>
                <code data-trim >
Request req = new Request("http://juanbandafanpage.com");
req = req.body("fanId=chichico");
req = req.post();
req.fetch();
                </code>
                <code data-trim >
Request req = new Request("http://juanbandafanpage.com");
req.body("fanId=chichico").post().fetch();
                </code>
              </pre>
            </section>

            <section>
              <ul>
                <li>java.lang.String</li>
                <li>java.util.Date</li>
                <li>com.google.guava</li>
              </ul>
            </section>

            <section>
              <h2>Un ejemplo ...real</h2>
                <pre>
                    <code data-trim >
          class Constants{
            ...
            static List&lt;Lang&gt; ALL_LANGS =
              Arrays.asList(DE,ENG,IT,FR);
          }

          class Session{
            void login(){
              availableLangs = Constants.ALL_LANGS;
            }

            void terminate(){
              availableLangs.clear();
            }
          }
                </code>
                </pre>
            </section>

             <section>
              <pre>
                <code data-trim >
            class Constants{
              ...
              static List&lt;Lang&gt; ALL_LANGS =
                Collections.unmodifiableList(
                  Arrays.asList(DE,ENG,IT,FR)
                );
            }
                </code>
              </pre>
            </section>


            <section data-background="#4d7e65" data-background-transition="zoom">
              <p>Los valores no cambian, generan nuevos valores</p>
              <p>El estado mutable es local</p>
              <p>Los valores no necesitan thread-safety</p>
              <p>No existen efectos secundarios</p>
              <p>Identidad!!!</p>
            </section>
        </section>

        <section>
            <section>
              <h2>Estilo declarativo</h2>
            </section>
            <section>
              <h2>Diga lo que hace, haga lo que dice</h2>
            </section>

            <section>
                <pre>
                <code data-trim >
  int countBugs(String filePath){
    Path path = Paths.get(filePath);
    int count = 0;

    try(FileReader reader = new FileReader(
          Files.newInputStream(path))
       ){
        String line = null;
        while( (line = reader.readLine()) != null )
            if(line.contains(“BUG”))
               count++;

    }catch(IOException e){
      printErr(e);
    }
  }
            </code>
            </pre>
            </section>

            <section>
                <pre>
                <code data-trim >
  int countBugs(String filePath){
    return Files.readAllLines(Paths.get(filePath))
        .stream()
        .filter(line -> line.contains(“BUG”))
        .count();
  }
                </code>
                </pre>
            </section>

            <section>
              <h2>Mas ejemplos?</h2>
                <pre>
                <code data-trim >
    List&lt;Deposit&gt; deposits= …;



    // give me the big transfers
    long allBigTransfers = deposits.stream()
      .filter(d -> d.amount > 10000L)
      .mapToLong(d -> t.amount)
      .sum();


    // give me the smallest transfer
    Optional<> minTransfer = deposits.stream()
             .min((d1, d2) -> d1 > d2);

                </code>
                </pre>
            </section>

            <section data-background="#4d7e65" data-background-transition="zoom">
              <p>Código expresivo</p>
              <p>Enfoque en el fondo, no la forma</p>
              <p>Simplicidad inherente</p>
              <p>Evaluación optimizable</p>
            </section>
        </section>

        <!--
          <section>
          <h2>Tipos de datos específicos</h2>
        </section>
        -->

        <section>
            <section>
              <h2>Funciones como datos</h2>
            </section>

            <section>
                <pre>
                <code data-trim>
$> find . -iname *.java | grep server | xargs hg rm
                </code>
                </pre>
            </section>

            <section>
              //TODO un ejemplo
            </section>

            <section data-background="#4d7e65" data-background-transition="zoom">
              <p>Funciones como datos</p>
              <p>Funciones componibles</p>
              <p>Funciones cortas y simples</p>
            </section>
        </section>


        <section>
            <section>
                <h2>Datos como datos</h2>
            </section>

            <section data-background="#4d7e65" data-background-transition="zoom">
              <p>TODO</p>
            </section>
        </section>

        <section>
          <blockquote>
            La simplicidad es la característica mas devaluada
            de los sistemas de software.
          </blockquote>
          <small>Yo, hace 10 segs</small>
        </section>

			</div>

		</div>

		<script src="reveal.js/lib/js/head.min.js"></script>
		<script src="reveal.js/js/reveal.js"></script>

		<script>

			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				// Optional reveal.js plugins
				dependencies: [
					{ src: 'reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'reveal.js/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'reveal.js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'reveal.js/plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'reveal.js/plugin/zoom-js/zoom.js', async: true },
					{ src: 'reveal.js/plugin/notes/notes.js', async: true }
				]
			});

		</script>

	</body>
</html>

